(function(a){a.extend(a.fn,{featureGallery:function(c){if(!this.length){window.console&&console.warn("Nothing selected");return}var b=a.data(this[0],"featureGallery");if(b){return b}b=new a.FeatureGallery(c,this[0]);a.data(this[0],"featureGallery",b);return b}});a.FeatureGallery=function(b,c){this.settings=a.extend(true,{},a.FeatureGallery.prototype.defaults,b);this.el=a(c);this.slides=a(this.settings.slideSelector,this.el);this.init()};a.extend(a.FeatureGallery.prototype,{defaults:{autoPlay:true,autoPlaySpeed:5500,slideSelector:".feature-slide",activeClass:"active-slide",slideToggleSelector:".slide-toggle",deviceToggleSelector:null,deviceToggleActiveClass:null,deviceToggleGalleryClass:null,selectFeatureCallback:null},init:function(){var b=this;this.initEventHandlers();this.featureCycler=window.setInterval(function(){b.cycleFeature()},this.settings.autoPlaySpeed)},initEventHandlers:function(){var b=this;this.el.delegate(this.settings.slideSelector,"click",function(){b.selectFeature(a(this))});if(this.settings.deviceToggleSelector){this.el.delegate(this.settings.deviceToggleSelector,"click",function(){b.deviceToggle(a(this))})}if(this.settings.autoPlay){this.el.delegate(this.settings.slideToggleSelector,"click",function(){b.cycleFeature(a(this).data("direction"))});this.el.delegate(this.settings.slideSelector,"mousedown",function(){b.stopAutoPlay()});this.el.delegate(this.settings.slideToggleSelector,"mousedown",function(){b.stopAutoPlay()})}},deviceToggle:function(c){var b=this.settings.deviceToggleActiveClass;if(!c.hasClass(b)){c.addClass(b).siblings().removeClass(b);this.el.toggleClass("android-features")}},selectFeature:function(b){var c=this.settings.activeClass;if(!b.hasClass(c)){a("."+c,this.el).removeClass(c);b.addClass(c);if(this.settings.selectFeatureCallback&&typeof this.settings.selectFeatureCallback==="function"){this.settings.selectFeatureCallback(b,this.featureCycler)}}},cycleFeature:function(c){c=c||"next";var b=null;if(c==="next"){b=this.getActiveSlide().next();if(b.length===0){b=this.getFirstSlide()}}else{b=this.getActiveSlide().prev();if(b.length===0){b=this.getLastSlide()}}this.selectFeature(b)},stopAutoPlay:function(){window.clearInterval(this.featureCycler);this.featureCycler=null},getFirstSlide:function(){return a(this.settings.slideSelector+":first",this.el)},getLastSlide:function(){return a(this.settings.slideSelector+":last",this.el)},getActiveSlide:function(){return a(this.settings.slideSelector+"."+this.settings.activeClass,this.el)}})})(jQuery);